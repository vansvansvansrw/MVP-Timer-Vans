<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ragnarok MVP Timer (Mobile V2)</title>
    <!-- --- NO Mobile Redirect Script --- -->
    <style>
		/* --- CSS for Version Toggle Link (Top Left) --- */
        .top-left-controls {
            position: absolute;
            top: 15px;
            left: 15px; /* Mobile Padding */
            z-index: 10;
        }
        .version-toggle-link a {
            color: #a7f3d0;
            text-decoration: none;
            font-size: 0.8em; /* Mobile Font */
            padding: 4px 6px;
            background-color: rgba(85, 85, 85, 0.5);
            border-radius: 4px;
            border: 1px solid #777;
        }
        .version-toggle-link a:hover {
            text-decoration: underline;
            background-color: rgba(102, 102, 102, 0.7);
        }
        /* --- End Version Toggle CSS --- */

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            padding: 15px;
            padding-top: 50px; /* Add padding top for controls */
            background: #212121;
            color: #e0e0e0;
            /* Removed max-width for mobile */
            margin: 0 auto;
        }
        h1 {
            color: #818cf8;
            text-align: center;
            font-size: 1.4em; /* Mobile Font */
            margin-bottom: 10px;
        }
        /* --- Controls Container (Mobile) --- */
        .top-controls {
            position: absolute;
            top: 15px;
            right: 15px; /* Mobile Position */
            display: flex;
            align-items: center;
            gap: 10px; /* Mobile Gap */
            z-index: 10;
        }
        #sound-toggle,
        #sort-now-btn {
            font-size: 1.8em;
            cursor: pointer;
            user-select: none;
        }
        /* --- End Controls CSS --- */

        /* --- Search Box CSS (Mobile) --- */
        .search-container {
            position: relative;
            margin-bottom: 15px;
        }
        #search-input {
            width: 100%;
            padding: 10px 35px 10px 15px;
            font-size: 1em; /* Mobile Font */
            box-sizing: border-box;
            background-color: #333;
            color: #e0e0e0;
            border: 1px solid #555;
            border-radius: 8px;
            color-scheme: dark;
        }
        #clear-search-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.4em;
            cursor: pointer;
            padding: 0 5px;
            display: none;
        }
        /* --- End Search Box CSS --- */

        .mvp-container {
            display: grid;
            /* Mobile Layout: Start with 2 columns */
            grid-template-columns: repeat(2, 1fr);
            gap: 10px; /* Mobile Gap */
        }

        /* Responsive adjustments for larger screens */
        @media (min-width: 600px) {
             .mvp-container {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 15px;
            }
             body { max-width: 1100px; } /* Restore max-width */
             h1 { font-size: 1.5em; }
             #search-input { font-size: 1.1em; }
             #clear-search-btn { font-size: 1.5em; right: 10px; }
             .top-controls { gap: 15px; right: 20px; }
             .top-left-controls { left: 20px; }
             .version-toggle-link a { font-size: 0.9em; }
        }


        .mvp {
            background: #333333;
            border: 1px solid #555;
            padding: 10px; /* Mobile Padding */
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .mvp-header { display: flex; flex-direction: column; align-items: center; margin-bottom: 3px; }
        .mvp-name { display: block; font-weight: bold; font-size: 0.85em; color: #ffffff; width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: center; min-width: 0; }
        .mvp-duration { font-size: 0.8em; color: #b0b0b0; text-align: center; }
        .mvp-map { display: block; font-size: 0.8em; color: #aaa; font-style: italic; text-align: center; margin-bottom: 5px; margin-top: -3px; }
        .mvp-sprite { width: 60px; height: 60px; margin: 3px auto; object-fit: contain; border-radius: 4px; display: block; }

        /* Timer CSS */
        .timer { font-size: 1.6em; font-weight: 700; text-align: center; margin: 8px 0; font-family: "Courier New", Courier, monospace; }
        .timer.timer-normal { color: #f0f0f0; }
        .timer.timer-window { color: #4ade80; }
        .timer.timer-overdue { color: #f87171; }
        .timer.timer-na { color: #777; font-size: 1.2em; font-weight: normal; }
        /* End Timer CSS */

        .mvp-death-time { display: block; font-size: 0.8em; color: #aaa; font-style: italic; text-align: center; margin-top: 3px; height: 1.1em; }

        /* Button Group CSS (Mobile Adjusted) */
        .button-group { display: flex; flex-direction: column; gap: 6px; margin-top: 8px; }
        .button-row { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
        /* End Button Group CSS */

        button { font-size: 0.9em; padding: 8px 10px; cursor: pointer; color: white; border: none; border-radius: 5px; transition: background-color 0.2s; grid-column: span 2; }
        .dead-btn { background-color: #ef4444; grid-column: 1 / 2; }
        .dead-btn:hover { background-color: #dc2626; }
        .clear-btn { background-color: #6b7280; grid-column: 2 / 3; }
        .clear-btn:hover { background-color: #4b5563; }
        .edit-btn { background-color: #3b82f6; grid-column: 1 / 3; }
        .edit-btn:hover { background-color: #2563eb; }

        /* Modal CSS */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); }
        .modal-content { background-color: #333333; margin: 25% auto; padding: 20px; border: 1px solid #555; border-radius: 8px; width: 90%; max-width: 400px; position: relative; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #555; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-header h2 { margin: 0; color: #c7d2fe; }
        .close-btn { color: #ccc; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close-btn:hover, .close-btn:focus { color: #ffffff; }
        #edit-form label { display: block; margin-bottom: 5px; font-weight: bold; }
        #edit-datetime { width: 100%; padding: 8px; font-size: 1.1em; box-sizing: border-box; margin-bottom: 15px; background-color: #2c2c44; color: #e0e0e0; border: 1px solid #555; border-radius: 4px; color-scheme: dark; }
        #save-edit-btn { background-color: #5cb85c; width: 100%; }
        #save-edit-btn:hover { background-color: #4cae4c; }
        /* End Modal CSS */


        /* Filter CSS (Mobile Adjusted) */
        .filter-section { background-color: #333333; border: 1px solid #555; border-radius: 8px; padding: 15px; margin-top: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .filter-section h2 { margin-top: 0; color: #c7d2fe; border-bottom: 1px solid #555; padding-bottom: 10px; font-size: 1.2em; }
        .filter-controls { display: flex; gap: 10px; margin-bottom: 15px; }
        .filter-btn { padding: 5px 10px; font-size: 0.9em; background-color: #555; border: 1px solid #777; }
        .filter-btn:hover { background-color: #666; }
        #filter-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 8px; }
        .filter-item { display: flex; align-items: center; }
        .filter-item input { margin-right: 8px; accent-color: #3b82f6; }
        .filter-item label { font-size: 0.9em; cursor: pointer; }
        /* End Filter CSS */

    </style>
</head>
<body>
    <!-- --- Version Toggle Link (Points to Mobile V1) --- -->
    <div class="top-left-controls">
        <div class="version-toggle-link">
             <a href="index_mobile.html">‡∏Å‡∏•‡∏±‡∏ö V1 (Mobile Auto Sort)</a>
        </div>
    </div>

    <!-- --- Top Controls (V2: Manual Sort + Sound) --- -->
     <div class="top-controls">
        <div id="sort-now-btn">üîÑ</div>
        <div id="sound-toggle">üì¢</div>
     </div>
    <audio id="alert-sound" src="mvpalert2.mp3" preload="auto"></audio>

    <h1>MVP Timer (Mobile V2)</h1>

    <!-- Search Box HTML -->
    <div class="search-container">
        <input type="text" id="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏≠‡∏™...">
        <button id="clear-search-btn" title="‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤">&times;</button>
    </div>

    <div class="mvp-container" id="mvp-list-container">
        <!-- MVP Cards: The HTML structure is identical to index_v2.html -->
        <!-- Amon Ra -->
        <div class="mvp" id="card-amon_ra">
             <div>
                <div class="mvp-header"> <span class="mvp-name">Amon Ra</span> <span class="mvp-duration">(60 min. / ID: 1511)</span> </div>
                <small class="mvp-map">moc_pryd06</small>
                <img class="mvp-sprite" src="images/1511.gif" alt="Amon Ra Sprite">
                <div id="timer-amon_ra" class="timer timer-na">...</div>
                <small id="death-time-amon_ra" class="mvp-death-time">&nbsp;</small>
            </div>
            <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('amon_ra', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('amon_ra')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('amon_ra', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
            </div>
        </div>
        <!-- Assassin Cross Eremes -->
        <div class="mvp" id="card-eremes">
            <div>
                <div class="mvp-header"> <span class="mvp-name">Assassin Cross Eremes</span> <span class="mvp-duration">(100 min. / ID: 1647)</span> </div>
                <small class="mvp-map">lhz_dun03</small>
                <img class="mvp-sprite" src="images/1647.gif" alt="Assassin Cross Eremes Sprite">
                <div id="timer-eremes" class="timer timer-na">...</div>
                <small id="death-time-eremes" class="mvp-death-time">&nbsp;</small>
            </div>
            <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('eremes', 6000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('eremes')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('eremes', 6000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
            </div>
        </div>
        <!-- ... (Paste ALL other MVP card divs from index_v2.html here) ... -->
        <!-- Atroce (ra_fild02) -->
        <div class="mvp" id="card-atroce_ra_fild02">
            <div>
                <div class="mvp-header"> <span class="mvp-name">Atroce (ra_fild02)</span> <span class="mvp-duration">(240 min. / ID: 1785)</span> </div>
                <small class="mvp-map">Od Canyon</small>
                <img class="mvp-sprite" src="images/1785.gif" alt="Atroce Sprite">
                <div id="timer-atroce_ra_fild02" class="timer timer-na">...</div>
                <small id="death-time-atroce_ra_fild02" class="mvp-death-time">&nbsp;</small>
            </div>
            <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('atroce_ra_fild02', 14400)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('atroce_ra_fild02')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('atroce_ra_fild02', 14400)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
            </div>
        </div>
         <!-- Atroce (ra_fild03) -->
         <div class="mvp" id="card-atroce_ra_fild03">
              <div>
                 <div class="mvp-header"> <span class="mvp-name">Atroce (ra_fild03)</span> <span class="mvp-duration">(180 min. / ID: 1785)</span> </div>
                 <small class="mvp-map">The Plain of Ida</small>
                 <img class="mvp-sprite" src="images/1785.gif" alt="Atroce Sprite">
                 <div id="timer-atroce_ra_fild03" class="timer timer-na">...</div>
                 <small id="death-time-atroce_ra_fild03" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('atroce_ra_fild03', 10800)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('atroce_ra_fild03')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('atroce_ra_fild03', 10800)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Atroce (ra_fild04) -->
          <div class="mvp" id="card-atroce_ra_fild04">
              <div>
                 <div class="mvp-header"> <span class="mvp-name">Atroce (ra_fild04)</span> <span class="mvp-duration">(300 min. / ID: 1785)</span> </div>
                 <small class="mvp-map">Audhumbla Grassland</small>
                 <img class="mvp-sprite" src="images/1785.gif" alt="Atroce Sprite">
                 <div id="timer-atroce_ra_fild04" class="timer timer-na">...</div>
                 <small id="death-time-atroce_ra_fild04" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('atroce_ra_fild04', 18000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('atroce_ra_fild04')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('atroce_ra_fild04', 18000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Atroce (ve_fild01) -->
          <div class="mvp" id="card-atroce_ve_fild01">
              <div>
                 <div class="mvp-header"> <span class="mvp-name">Atroce (ve_fild01)</span> <span class="mvp-duration">(180 min. / ID: 1785)</span> </div>
                 <small class="mvp-map">Veins Field</small>
                 <img class="mvp-sprite" src="images/1785.gif" alt="Atroce Sprite">
                 <div id="timer-atroce_ve_fild01" class="timer timer-na">...</div>
                 <small id="death-time-atroce_ve_fild01" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('atroce_ve_fild01', 10800)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('atroce_ve_fild01')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('atroce_ve_fild01', 10800)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Atroce (ve_fild02) -->
          <div class="mvp" id="card-atroce_ve_fild02">
              <div>
                 <div class="mvp-header"> <span class="mvp-name">Atroce (ve_fild02)</span> <span class="mvp-duration">(360 min. / ID: 1785)</span> </div>
                 <small class="mvp-map">Veins Field</small>
                 <img class="mvp-sprite" src="images/1785.gif" alt="Atroce Sprite">
                 <div id="timer-atroce_ve_fild02" class="timer timer-na">...</div>
                 <small id="death-time-atroce_ve_fild02" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('atroce_ve_fild02', 21600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('atroce_ve_fild02')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('atroce_ve_fild02', 21600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Bacsojin -->
          <div class="mvp" id="card-bacsojin">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Bacsojin</span> <span class="mvp-duration">(117 min. / ID: 1630)</span> </div>
                <small class="mvp-map">lou_dun03</small>
                <img class="mvp-sprite" src="images/1630.gif" alt="Bacsojin Sprite">
                <div id="timer-bacsojin" class="timer timer-na">...</div>
                <small id="death-time-bacsojin" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('bacsojin', 7020)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('bacsojin')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('bacsojin', 7020)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Baphomet -->
          <div class="mvp" id="card-baphomet">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Baphomet</span> <span class="mvp-duration">(120 min. / ID: 1039)</span> </div>
                <small class="mvp-map">prt_maze03</small>
                <img class="mvp-sprite" src="images/1039.gif" alt="Baphomet Sprite">
                <div id="timer-baphomet" class="timer timer-na">...</div>
                <small id="death-time-baphomet" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('baphomet', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('baphomet')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('baphomet', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Boitata -->
          <div class="mvp" id="card-boitata">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Boitata</span> <span class="mvp-duration">(120 min. / ID: 2068)</span> </div>
                <small class="mvp-map">bra_dun02</small>
                <img class="mvp-sprite" src="images/2068.gif" alt="Boitata Sprite">
                <div id="timer-boitata" class="timer timer-na">...</div>
                <small id="death-time-boitata" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('boitata', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('boitata')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('boitata', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Dark Lord -->
          <div class="mvp" id="card-dark_lord">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Dark Lord</span> <span class="mvp-duration">(60 min. / ID: 1272)</span> </div>
                <small class="mvp-map">gl_chyard</small>
                <img class="mvp-sprite" src="images/1272.gif" alt="Dark Lord Sprite">
                <div id="timer-dark_lord" class="timer timer-na">...</div>
                <small id="death-time-dark_lord" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('dark_lord', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('dark_lord')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('dark_lord', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Detale -->
          <div class="mvp" id="card-detale">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Detale</span> <span class="mvp-duration">(180 min. / ID: 1719)</span> </div>
                <small class="mvp-map">abyss_03</small>
                <img class="mvp-sprite" src="images/1719.gif" alt="Detale Sprite">
                <div id="timer-detale" class="timer timer-na">...</div>
                <small id="death-time-detale" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('detale', 10800)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('detale')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('detale', 10800)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Doppelganger -->
          <div class="mvp" id="card-doppel">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Doppelganger</span> <span class="mvp-duration">(120 min. / ID: 1046)</span> </div>
                <small class="mvp-map">gef_dun02</small>
                <img class="mvp-sprite" src="images/1046.gif" alt="Doppelganger Sprite">
                <div id="timer-doppel" class="timer timer-na">...</div>
                <small id="death-time-doppel" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('doppel', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('doppel')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('doppel', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Dracula -->
          <div class="mvp" id="card-dracula">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Dracula</span> <span class="mvp-duration">(60 min. / ID: 1389)</span> </div>
                <small class="mvp-map">gef_dun01</small>
                <img class="mvp-sprite" src="images/1389.gif" alt="Dracula Sprite">
                <div id="timer-dracula" class="timer timer-na">...</div>
                <small id="death-time-dracula" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('dracula', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('dracula')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('dracula', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Drake -->
          <div class="mvp" id="card-drake">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Drake</span> <span class="mvp-duration">(120 min. / ID: 1112)</span> </div>
                <small class="mvp-map">treasure02</small>
                <img class="mvp-sprite" src="images/1112.gif" alt="Drake Sprite">
                <div id="timer-drake" class="timer timer-na">...</div>
                <small id="death-time-drake" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('drake', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('drake')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('drake', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Eddga -->
          <div class="mvp" id="card-eddga">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Eddga</span> <span class="mvp-duration">(120 min. / ID: 1115)</span> </div>
                <small class="mvp-map">pay_fild11</small>
                <img class="mvp-sprite" src="images/1115.gif" alt="Eddga Sprite">
                <div id="timer-eddga" class="timer timer-na">...</div>
                <small id="death-time-eddga" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('eddga', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('eddga')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('eddga', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Evil Snake Lord -->
          <div class="mvp" id="card-evil_snake_lord">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Evil Snake Lord</span> <span class="mvp-duration">(94 min. / ID: 1418)</span> </div>
                <small class="mvp-map">gon_dun03</small>
                <img class="mvp-sprite" src="images/1418.gif" alt="Evil Snake Lord Sprite">
                <div id="timer-evil_snake_lord" class="timer timer-na">...</div>
                <small id="death-time-evil_snake_lord" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('evil_snake_lord', 5640)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('evil_snake_lord')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('evil_snake_lord', 5640)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Fallen Bishop -->
          <div class="mvp" id="card-bishop">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Fallen Bishop</span> <span class="mvp-duration">(120 min. / ID: 1871)</span> </div>
                <small class="mvp-map">abbey02</small>
                <img class="mvp-sprite" src="images/1871.gif" alt="Fallen Bishop Sprite">
                <div id="timer-bishop" class="timer timer-na">...</div>
                <small id="death-time-bishop" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('bishop', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('bishop')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('bishop', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Garm / Hatii -->
          <div class="mvp" id="card-hatii">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Garm / Hatii</span> <span class="mvp-duration">(120 min. / ID: 1252)</span> </div>
                <small class="mvp-map">xmas_fild01</small>
                <img class="mvp-sprite" src="images/1252.gif" alt="Garm / Hatii Sprite">
                <div id="timer-hatii" class="timer timer-na">...</div>
                <small id="death-time-hatii" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('hatii', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('hatii')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('hatii', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Gloom Under Night -->
          <div class="mvp" id="card-gloom">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Gloom Under Night</span> <span class="mvp-duration">(300 min. / ID: 1768)</span> </div>
                <small class="mvp-map">ra_san05</small>
                <img class="mvp-sprite" src="images/1768.gif" alt="Gloom Under Night Sprite">
                <div id="timer-gloom" class="timer timer-na">...</div>
                <small id="death-time-gloom" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('gloom', 18000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('gloom')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('gloom', 18000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Gold Queen Scaraba -->
          <div class="mvp" id="card-gold_queen">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Gold Queen Scaraba</span> <span class="mvp-duration">(120 min. / ID: 2165)</span> </div>
                <small class="mvp-map">dic_dun03</small>
                <img class="mvp-sprite" src="images/2165.gif" alt="Gold Queen Scaraba Sprite">
                <div id="timer-gold_queen" class="timer timer-na">...</div>
                <small id="death-time-gold_queen" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('gold_queen', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('gold_queen')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('gold_queen', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Golden Thief Bug -->
          <div class="mvp" id="card-gtb">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Golden Thief Bug</span> <span class="mvp-duration">(60 min. / ID: 1086)</span> </div>
                <small class="mvp-map">prt_sewb4</small>
                <img class="mvp-sprite" src="images/1086.gif" alt="Golden Thief Bug Sprite">
                <div id="timer-gtb" class="timer timer-na">...</div>
                <small id="death-time-gtb" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('gtb', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('gtb')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('gtb', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Gopinich -->
          <div class="mvp" id="card-gopinich">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Gopinich</span> <span class="mvp-duration">(120 min. / ID: 1885)</span> </div>
                <small class="mvp-map">mosk_dun03</small>
                <img class="mvp-sprite" src="images/1885.gif" alt="Gopinich Sprite">
                <div id="timer-gopinich" class="timer timer-na">...</div>
                <small id="death-time-gopinich" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('gopinich', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('gopinich')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('gopinich', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- High Priest Magaleta -->
          <div class="mvp" id="card-magaleta">
              <div>
                <div class="mvp-header"> <span class="mvp-name">High Priest Magaleta</span> <span class="mvp-duration">(100 min. / ID: 1649)</span> </div>
                <small class="mvp-map">lhz_dun03</small>
                <img class="mvp-sprite" src="images/1649.gif" alt="High Priest Magaleta Sprite">
                <div id="timer-magaleta" class="timer timer-na">...</div>
                <small id="death-time-magaleta" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('magaleta', 6000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('magaleta')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('magaleta', 6000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- High Wizard Katrinn -->
          <div class="mvp" id="card-katrinn">
              <div>
                <div class="mvp-header"> <span class="mvp-name">High Wizard Katrinn</span> <span class="mvp-duration">(100 min. / ID: 1651)</span> </div>
                <small class="mvp-map">lhz_dun03</small>
                <img class="mvp-sprite" src="images/1651.gif" alt="High Wizard Katrinn Sprite">
                <div id="timer-katrinn" class="timer timer-na">...</div>
                <small id="death-time-katrinn" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('katrinn', 6000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('katrinn')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('katrinn', 6000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Ifrit -->
          <div class="mvp" id="card-ifrit">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Ifrit</span> <span class="mvp-duration">(660 min. / ID: 1832)</span> </div>
                <small class="mvp-map">thor_v03</small>
                <img class="mvp-sprite" src="images/1832.gif" alt="Ifrit Sprite">
                <div id="timer-ifrit" class="timer timer-na">...</div>
                <small id="death-time-ifrit" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('ifrit', 39600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('ifrit')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('ifrit', 39600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Incantation Samurai -->
          <div class="mvp" id="card-samurai">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Incantation Samurai</span> <span class="mvp-duration">(91 min. / ID: 1492)</span> </div>
                <small class="mvp-map">ama_dun03</small>
                <img class="mvp-sprite" src="images/1492.gif" alt="Incantation Samurai Sprite">
                <div id="timer-samurai" class="timer timer-na">...</div>
                <small id="death-time-samurai" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('samurai', 5460)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('samurai')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('samurai', 5460)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Kiel D-01 -->
          <div class="mvp" id="card-kiel">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Kiel D-01</span> <span class="mvp-duration">(120 min. / ID: 1734)</span> </div>
                <small class="mvp-map">kh_dun02</small>
                <img class="mvp-sprite" src="images/1734.gif" alt="Kiel D-01 Sprite">
                <div id="timer-kiel" class="timer timer-na">...</div>
                <small id="death-time-kiel" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('kiel', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('kiel')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('kiel', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Stormy Knight -->
          <div class="mvp" id="card-stormy">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Stormy Knight</span> <span class="mvp-duration">(60 min. / ID: 1251)</span> </div>
                <small class="mvp-map">xmas_dun02</small>
                <img class="mvp-sprite" src="images/1251.gif" alt="Stormy Knight Sprite">
                <div id="timer-stormy" class="timer timer-na">...</div>
                <small id="death-time-stormy" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('stormy', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('stormy')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('stormy', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
         <!-- Ktullanux - No buttons -->
         <div class="mvp" id="card-ktullanux">
             <div>
                 <div class="mvp-header"> <span class="mvp-name">Ktullanux</span> <span class="mvp-duration">(Quest / ID: 1779)</span> </div>
                 <small class="mvp-map">ice_dun03</small>
                 <img class="mvp-sprite" src="images/1779.gif" alt="Ktullanux Sprite">
                 <div id="timer-ktullanux" class="timer timer-na">Quest / Summon</div>
                 <small id="death-time-ktullanux" class="mvp-death-time">&nbsp;</small>
             </div>
             <div> <!-- No buttons needed --> </div>
         </div>
          <!-- Lady Tanee -->
          <div class="mvp" id="card-lady_tanee">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Lady Tanee</span> <span class="mvp-duration">(420 min. / ID: 1688)</span> </div>
                <small class="mvp-map">ayo_dun02</small>
                <img class="mvp-sprite" src="images/1688.gif" alt="Lady Tanee Sprite">
                <div id="timer-lady_tanee" class="timer timer-na">...</div>
                <small id="death-time-lady_tanee" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('lady_tanee', 25200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('lady_tanee')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('lady_tanee', 25200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Leak -->
          <div class="mvp" id="card-leak">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Leak</span> <span class="mvp-duration">(120 min. / ID: 2156)</span> </div>
                <small class="mvp-map">dew_dun01</small>
                <img class="mvp-sprite" src="images/2156.gif" alt="Leak Sprite">
                <div id="timer-leak" class="timer timer-na">...</div>
                <small id="death-time-leak" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('leak', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('leak')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('leak', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Lord Knight Seyren -->
          <div class="mvp" id="card-seyren">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Lord Knight Seyren</span> <span class="mvp-duration">(100 min. / ID: 1646)</span> </div>
                <small class="mvp-map">lhz_dun03</small>
                <img class="mvp-sprite" src="images/1646.gif" alt="Lord Knight Seyren Sprite">
                <div id="timer-seyren" class="timer timer-na">...</div>
                <small id="death-time-seyren" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('seyren', 6000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('seyren')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('seyren', 6000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Lord of Death -->
          <div class="mvp" id="card-lord_of_death">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Lord of Death</span> <span class="mvp-duration">(133 min. / ID: 1373)</span> </div>
                <small class="mvp-map">niflheim</small>
                <img class="mvp-sprite" src="images/1373.gif" alt="Lord of Death Sprite">
                <div id="timer-lord_of_death" class="timer timer-na">...</div>
                <small id="death-time-lord_of_death" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('lord_of_death', 7980)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('lord_of_death')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('lord_of_death', 7980)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Maya -->
          <div class="mvp" id="card-maya">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Maya</span> <span class="mvp-duration">(120 min. / ID: 1147)</span> </div>
                <small class="mvp-map">anthell02</small>
                <img class="mvp-sprite" src="images/1147.gif" alt="Maya Sprite">
                <div id="timer-maya" class="timer timer-na">...</div>
                <small id="death-time-maya" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('maya', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('maya')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('maya', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Mistress -->
          <div class="mvp" id="card-mistress">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Mistress</span> <span class="mvp-duration">(120 min. / ID: 1059)</span> </div>
                <small class="mvp-map">mjolnir_04</small>
                <img class="mvp-sprite" src="images/1059.gif" alt="Mistress Sprite">
                <div id="timer-mistress" class="timer timer-na">...</div>
                <small id="death-time-mistress" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('mistress', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('mistress')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('mistress', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Moonlight Flower -->
          <div class="mvp" id="card-moonlight">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Moonlight Flower</span> <span class="mvp-duration">(60 min. / ID: 1150)</span> </div>
                <small class="mvp-map">pay_dun04</small>
                <img class="mvp-sprite" src="images/1150.gif" alt="Moonlight Flower Sprite">
                <div id="timer-moonlight" class="timer timer-na">...</div>
                <small id="death-time-moonlight" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('moonlight', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('moonlight')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('moonlight', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
         <!-- Nidhoggr's Shadow - No buttons -->
         <div class="mvp" id="card-nidhoggr">
             <div>
                 <div class="mvp-header"> <span class="mvp-name">Nidhoggr's Shadow</span> <span class="mvp-duration">(Instance / ID: 2022)</span> </div>
                 <small class="mvp-map">2@nyd</small>
                 <img class="mvp-sprite" src="images/2022.gif" alt="Nidhoggr's Shadow Sprite">
                 <div id="timer-nidhoggr" class="timer timer-na">Instance</div>
                 <small id="death-time-nidhoggr" class="mvp-death-time">&nbsp;</small>
             </div>
             <div> <!-- No buttons needed --> </div>
         </div>
          <!-- Orc Hero (gef_fild02) -->
          <div class="mvp" id="card-orc_hero_gef_fild02">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Orc Hero (gef_fild02)</span> <span class="mvp-duration">(1440 min. / ID: 1087)</span> </div>
                <small class="mvp-map">Geffen Field</small>
                <img class="mvp-sprite" src="images/1087.gif" alt="Orc Hero Sprite">
                <div id="timer-orc_hero_gef_fild02" class="timer timer-na">...</div>
                <small id="death-time-orc_hero_gef_fild02" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('orc_hero_gef_fild02', 86400)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('orc_hero_gef_fild02')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('orc_hero_gef_fild02', 86400)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Orc Hero (gef_fild14) -->
          <div class="mvp" id="card-orc_hero_gef_fild14">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Orc Hero (gef_fild14)</span> <span class="mvp-duration">(60 min. / ID: 1087)</span> </div>
                <small class="mvp-map">West Orc Village</small>
                <img class="mvp-sprite" src="images/1087.gif" alt="Orc Hero Sprite">
                <div id="timer-orc_hero_gef_fild14" class="timer timer-na">...</div>
                <small id="death-time-orc_hero_gef_fild14" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('orc_hero_gef_fild14', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('orc_hero_gef_fild14')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('orc_hero_gef_fild14', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Orc Lord -->
          <div class="mvp" id="card-orc_lord">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Orc Lord</span> <span class="mvp-duration">(120 min. / ID: 1190)</span> </div>
                <small class="mvp-map">gef_fild10</small>
                <img class="mvp-sprite" src="images/1190.gif" alt="Orc Lord Sprite">
                <div id="timer-orc_lord" class="timer timer-na">...</div>
                <small id="death-time-orc_lord" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('orc_lord', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('orc_lord')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('orc_lord', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Osiris -->
          <div class="mvp" id="card-osiris">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Osiris</span> <span class="mvp-duration">(60 min. / ID: 1038)</span> </div>
                <small class="mvp-map">moc_pryd04</small>
                <img class="mvp-sprite" src="images/1038.gif" alt="Osiris Sprite">
                <div id="timer-osiris" class="timer timer-na">...</div>
                <small id="death-time-osiris" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('osiris', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('osiris')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('osiris', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Pharaoh -->
          <div class="mvp" id="card-pharaoh">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Pharaoh</span> <span class="mvp-duration">(60 min. / ID: 1157)</span> </div>
                <small class="mvp-map">in_sphinx5</small>
                <img class="mvp-sprite" src="images/1157.gif" alt="Pharaoh Sprite">
                <div id="timer-pharaoh" class="timer timer-na">...</div>
                <small id="death-time-pharaoh" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('pharaoh', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('pharaoh')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('pharaoh', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Phreeoni -->
          <div class="mvp" id="card-phreeoni">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Phreeoni</span> <span class="mvp-duration">(120 min. / ID: 1159)</span> </div>
                <small class="mvp-map">moc_fild17</small>
                <img class="mvp-sprite" src="images/1159.gif" alt="Phreeoni Sprite">
                <div id="timer-phreeoni" class="timer timer-na">...</div>
                <small id="death-time-phreeoni" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('phreeoni', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('phreeoni')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('phreeoni', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Queen Scaraba -->
          <div class="mvp" id="card-queen_scaraba">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Queen Scaraba</span> <span class="mvp-duration">(120 min. / ID: 2087)</span> </div>
                <small class="mvp-map">dic_dun02</small>
                <img class="mvp-sprite" src="images/2087.gif" alt="Queen Scaraba Sprite">
                <div id="timer-queen_scaraba" class="timer timer-na">...</div>
                <small id="death-time-queen_scaraba" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('queen_scaraba', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('queen_scaraba')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('queen_scaraba', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- RSX 0806 -->
          <div class="mvp" id="card-rsx">
              <div>
                <div class="mvp-header"> <span class="mvp-name">RSX 0806</span> <span class="mvp-duration">(125 min. / ID: 1623)</span> </div>
                <small class="mvp-map">ein_dun02</small>
                <img class="mvp-sprite" src="images/1623.gif" alt="RSX 0806 Sprite">
                <div id="timer-rsx" class="timer timer-na">...</div>
                <small id="death-time-rsx" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('rsx', 7500)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('rsx')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('rsx', 7500)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Sniper Shecil -->
          <div class="mvp" id="card-shecil">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Sniper Shecil</span> <span class="mvp-duration">(100 min. / ID: 1650)</span> </div>
                <small class="mvp-map">lhz_dun03</small>
                <img class="mvp-sprite" src="images/1650.gif" alt="Sniper Shecil Sprite">
                <div id="timer-shecil" class="timer timer-na">...</div>
                <small id="death-time-shecil" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('shecil', 6000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('shecil')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('shecil', 6000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Tao Gunka -->
          <div class="mvp" id="card-tao_gunka">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Tao Gunka</span> <span class="mvp-duration">(300 min. / ID: 1583)</span> </div>
                <small class="mvp-map">beach_dun</small>
                <img class="mvp-sprite" src="images/1583.gif" alt="Tao Gunka Sprite">
                <div id="timer-tao_gunka" class="timer timer-na">...</div>
                <small id="death-time-tao_gunka" class="mvp-death-time">&nbsp;</Ssmall>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('tao_gunka', 18000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('tao_gunka')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('tao_gunka', 18000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
         <!-- Memory of Thanatos - No buttons -->
         <div class="mvp" id="card-thanatos">
             <div>
                 <div class="mvp-header"> <span class="mvp-name">Memory of Thanatos</span> <span class="mvp-duration">(Quest / ID: 1708)</span> </div>
                 <small class="mvp-map">thana_boss</small>
                 <img class="mvp-sprite" src="images/1708.gif" alt="Thanatos Sprite">
                 <div id="timer-thanatos" class="timer timer-na">Quest / Summon</div>
                 <small id="death-time-thanatos" class="mvp-death-time">&nbsp;</small>
             </div>
             <div> <!-- No buttons needed --> </div>
         </div>
          <!-- Turtle General -->
          <div class="mvp" id="card-turtle_general">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Turtle General</span> <span class="mvp-duration">(60 min. / ID: 1312)</span> </div>
                <small class="mvp-map">tur_dun04</small>
                <img class="mvp-sprite" src="images/1312.gif" alt="Turtle General Sprite">
                <div id="timer-turtle_general" class="timer timer-na">...</div>
                <small id="death-time-turtle_general" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('turtle_general', 3600)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('turtle_general')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('turtle_general', 3600)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Valkyrie Randgris -->
          <div class="mvp" id="card-valkyrie">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Valkyrie Randgris</span> <span class="mvp-duration">(480 min. / ID: 1751)</span> </div>
                <small class="mvp-map">odin_tem03</small>
                <img class="mvp-sprite" src="images/1751.gif" alt="Valkyrie Randgris Sprite">
                <div id="timer-valkyrie" class="timer timer-na">...</div>
                <small id="death-time-valkyrie" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('valkyrie', 28800)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('valkyrie')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('valkyrie', 28800)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Vesper -->
          <div class="mvp" id="card-vesper">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Vesper</span> <span class="mvp-duration">(120 min. / ID: 1685)</span> </div>
                <small class="mvp-map">jupe_core</small>
                <img class="mvp-sprite" src="images/1685.gif" alt="Vesper Sprite">
                <div id="timer-vesper" class="timer timer-na">...</div>
                <small id="death-time-vesper" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('vesper', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('vesper')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('vesper', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Whitesmith Harword -->
          <div class="mvp" id="card-harword">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Whitesmith Harword</span> <span class="mvp-duration">(100 min. / ID: 1648)</span> </div>
                <small class="mvp-map">lhz_dun03</small>
                <img class="mvp-sprite" src="images/1648.gif" alt="Whitesmith Harword Sprite">
                <div id="timer-harword" class="timer timer-na">...</div>
                <small id="death-time-harword" class="mvp-death-time">&nbsp;</Ssmall>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('harword', 6000)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('harword')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('harword', 6000)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Wounded Morocc -->
          <div class="mvp" id="card-morocc">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Wounded Morocc</span> <span class="mvp-duration">(720 min. / ID: 1917)</span> </div>
                <small class="mvp-map">moc_fild22</small>
                <img class="mvp-sprite" src="images/1917.gif" alt="Wounded Morocc Sprite">
                <div id="timer-morocc" class="timer timer-na">...</div>
                <small id="death-time-morocc" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('morocc', 43200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('morocc')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('morocc', 43200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>
          <!-- Ygnizem -->
          <div class="mvp" id="card-ygnizem">
              <div>
                <div class="mvp-header"> <span class="mvp-name">Ygnizem</span> <span class="mvp-duration">(120 min. / ID: 1658)</span> </div>
                <small class="mvp-map">lhz_dun02</small>
                <img class="mvp-sprite" src="images/1658.gif" alt="Ygnizem Sprite">
                <div id="timer-ygnizem" class="timer timer-na">...</div>
                <small id="death-time-ygnizem" class="mvp-death-time">&nbsp;</small>
              </div>
              <div>
                <div class="button-group">
                    <div class="button-row"> <button class="dead-btn" onclick="setTimer('ygnizem', 7200)">‡∏Å‡∏î‡∏ï‡∏≤‡∏¢</button> <button class="clear-btn" onclick="clearTimer('ygnizem')">‡∏•‡πâ‡∏≤‡∏á</button> </div>
                    <button class="edit-btn" onclick="openEditModal('ygnizem', 7200)">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
              </div>
          </div>

    </div> <!-- End .mvp-container -->


    <!-- Filter Section -->
    <div class="filter-section">
        <h2>‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏ö‡∏≠‡∏™ (Boss Filters)</h2>
        <div class="filter-controls">
            <button id="select-all-btn" class="filter-btn">Select All</button>
            <button id="deselect-all-btn" class="filter-btn">Deselect All</button>
        </div>
        <div id="filter-container">
            <!-- Checkboxes generated by JS -->
        </div>
    </div>


    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏¢</h2>
                <span class="close-btn" id="edit-close-btn">&times;</span>
            </div>
            <div id="edit-form">
                <label for="edit-datetime">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏™‡∏ï‡∏≤‡∏¢:</label>
                <input type="datetime-local" id="edit-datetime">
                <button id="save-edit-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</button>
            </div>
        </div>
    </div>


    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // --- JAVASCRIPT ---
        // (Includes all features: search, clear button, manual sort button, etc.)

        // Firebase Config
        const firebaseConfig = { /* ... same config ... */
          apiKey: "AIzaSyANfAjWOYNWX8NKlPU2aTT28nVQ_lXF2Ns",
          authDomain: "mvp-timer-56d9d.firebaseapp.com",
          databaseURL: "https://mvp-timer-56d9d-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "mvp-timer-56d9d",
          storageBucket: "mvp-timer-56d9d.firebasestorage.app",
          messagingSenderId: "733739832280",
          appId: "1:733739832280:web:ca4b5b9f5c5d8b611d18ad",
          measurementId: "G-MEQVDLFYHT"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const mvpRef = db.ref('mvp');
        // --- NEW: Reference for Filter Settings ---
        const filterSettingsRef = db.ref('settings/filters');

        function setTimer(mvpName, respawnSeconds) { /* ... */
            const nowInMs = new Date().getTime();
            const respawnTimeInMs = nowInMs + (respawnSeconds * 1000);
            mvpRef.child(mvpName).set({ respawnAt: respawnTimeInMs });
         }
        function clearTimer(mvpName) { /* ... */
             mvpRef.child(mvpName).remove();
        }
        const mvpList = [ /* ... same full list ... */
            { id: 'amon_ra', name: 'Amon Ra', seconds: 3600, id_num: 1511 },
            { id: 'eremes', name: 'Assassin Cross Eremes', seconds: 6000, id_num: 1647 },
            { id: 'atroce_ra_fild02', name: 'Atroce (ra_fild02)', seconds: 14400, id_num: 1785 },
            { id: 'atroce_ra_fild03', name: 'Atroce (ra_fild03)', seconds: 10800, id_num: 1785 },
            { id: 'atroce_ra_fild04', name: 'Atroce (ra_fild04)', seconds: 18000, id_num: 1785 },
            { id: 'atroce_ve_fild01', name: 'Atroce (ve_fild01)', seconds: 10800, id_num: 1785 },
            { id: 'atroce_ve_fild02', name: 'Atroce (ve_fild02)', seconds: 21600, id_num: 1785 },
            { id: 'bacsojin', name: 'Bacsojin', seconds: 7020, id_num: 1630 },
            { id: 'baphomet', name: 'Baphomet', seconds: 7200, id_num: 1039 },
            { id: 'boitata', name: 'Boitata', seconds: 7200, id_num: 2068 },
            { id: 'dark_lord', name: 'Dark Lord', seconds: 3600, id_num: 1272 },
            { id: 'detale', name: 'Detale', seconds: 10800, id_num: 1719 },
            { id: 'doppel', name: 'Doppelganger', seconds: 7200, id_num: 1046 },
            { id: 'dracula', name: 'Dracula', seconds: 3600, id_num: 1389 },
            { id: 'drake', name: 'Drake', seconds: 7200, id_num: 1112 },
            { id: 'eddga', name: 'Eddga', seconds: 7200, id_num: 1115 },
            { id: 'evil_snake_lord', name: 'Evil Snake Lord', seconds: 5640, id_num: 1418 },
            { id: 'bishop', name: 'Fallen Bishop', seconds: 7200, id_num: 1871 },
            { id: 'hatii', name: 'Garm / Hatii', seconds: 7200, id_num: 1252 },
            { id: 'gloom', name: 'Gloom Under Night', seconds: 18000, id_num: 1768 },
            { id: 'gold_queen', name: 'Gold Queen Scaraba', seconds: 7200, id_num: 2165 },
            { id: 'gtb', name: 'Golden Thief Bug', seconds: 3600, id_num: 1086 },
            { id: 'gopinich', name: 'Gopinich', seconds: 7200, id_num: 1885 },
            { id: 'magaleta', name: 'High Priest Magaleta', seconds: 6000, id_num: 1649 },
            { id: 'katrinn', name: 'High Wizard Katrinn', seconds: 6000, id_num: 1651 },
            { id: 'ifrit', name: 'Ifrit', seconds: 39600, id_num: 1832 },
            { id: 'samurai', name: 'Incantation Samurai', seconds: 5460, id_num: 1492 },
            { id: 'kiel', name: 'Kiel D-01', seconds: 7200, id_num: 1734 },
            { id: 'stormy', name: 'Stormy Knight', seconds: 3600, id_num: 1251 },
            { id: 'ktullanux', name: 'Ktullanux', seconds: 0, id_num: 1779 },
            { id: 'lady_tanee', name: 'Lady Tanee', seconds: 25200, id_num: 1688 },
            { id: 'leak', name: 'Leak', seconds: 7200, id_num: 2156 },
            { id: 'seyren', name: 'Lord Knight Seyren', seconds: 6000, id_num: 1646 },
            { id: 'lord_of_death', name: 'Lord of Death', seconds: 7980, id_num: 1373 },
            { id: 'maya', name: 'Maya', seconds: 7200, id_num: 1147 },
            { id: 'mistress', name: 'Mistress', seconds: 7200, id_num: 1059 },
            { id: 'moonlight', name: 'Moonlight Flower', seconds: 3600, id_num: 1150 },
            { id: 'nidhoggr', name: 'Nidhoggr\'s Shadow', seconds: 0, id_num: 2022 },
            { id: 'orc_hero_gef_fild02', name: 'Orc Hero (gef_fild02)', seconds: 86400, id_num: 1087 },
            { id: 'orc_hero_gef_fild14', name: 'Orc Hero (gef_fild14)', seconds: 3600, id_num: 1087 },
            { id: 'orc_lord', name: 'Orc Lord', seconds: 7200, id_num: 1190 },
            { id: 'osiris', name: 'Osiris', seconds: 3600, id_num: 1038 },
            { id: 'pharaoh', name: 'Pharaoh', seconds: 3600, id_num: 1157 },
            { id: 'phreeoni', name: 'Phreeoni', seconds: 7200, id_num: 1159 },
            { id: 'queen_scaraba', name: 'Queen Scaraba', seconds: 7200, id_num: 2087 },
            { id: 'rsx', name: 'RSX 0806', seconds: 7500, id_num: 1623 },
            { id: 'shecil', name: 'Sniper Shecil', seconds: 6000, id_num: 1650 },
            { id: 'tao_gunka', name: 'Tao Gunka', seconds: 18000, id_num: 1583 },
            { id: 'thanatos', name: 'Memory of Thanatos', seconds: 0, id_num: 1708 },
            { id: 'turtle_general', name: 'Turtle General', seconds: 3600, id_num: 1312 },
            { id: 'valkyrie', name: 'Valkyrie Randgris', seconds: 28800, id_num: 1751 },
            { id: 'vesper', name: 'Vesper', seconds: 7200, id_num: 1685 },
            { id: 'harword', name: 'Whitesmith Harword', seconds: 6000, id_num: 1648 },
            { id: 'morocc', name: 'Wounded Morocc', seconds: 43200, id_num: 1917 },
            { id: 'ygnizem', name: 'Ygnizem', seconds: 7200, id_num: 1658 }
        ];
        let currentMvpData = null; let isSoundEnabled = localStorage.getItem('mvpTimerSoundEnabled') === 'true'; let mvpStates = {};
        // --- NEW: Variable to hold loaded filter settings ---
        let loadedFilterSettings = null;
        let filtersLoaded = false; // Flag to check if filters have been loaded initially

        const alertSound = document.getElementById('alert-sound'); const soundToggleButton = document.getElementById('sound-toggle');
        function updateSoundToggleIcon() { /* ... */ if (soundToggleButton) { soundToggleButton.textContent = isSoundEnabled ? 'üì¢' : 'üîá'; } } updateSoundToggleIcon();
        if (soundToggleButton) { soundToggleButton.addEventListener('click', () => { /* ... */ isSoundEnabled = !isSoundEnabled; localStorage.setItem('mvpTimerSoundEnabled', isSoundEnabled); updateSoundToggleIcon(); if (isSoundEnabled && alertSound) { alertSound.play().catch(e => console.log("Audio play failed")); setTimeout(() => { if(alertSound && !alertSound.paused) alertSound.pause(); alertSound.currentTime = 0; }, 500); } }); }

        // Listen for MVP timer data
        mvpRef.on('value', (snapshot) => { currentMvpData = snapshot.val(); }, (error) => { console.error("Firebase read failed: " + error.name); });

        // --- NEW: Listen for Filter Settings ---
        filterSettingsRef.on('value', (snapshot) => {
            loadedFilterSettings = snapshot.val();
            filtersLoaded = true; // Mark filters as loaded
            // Update checkboxes and apply filters *after* settings are loaded
            initializeFiltersAndApply();
        }, (error) => {
            console.error("Firebase filter read failed: " + error.name);
            filtersLoaded = true; // Mark as loaded even on error to allow default init
            initializeFiltersAndApply(); // Initialize with defaults on error
        });
        // --- End Filter Settings Listener ---


        setInterval(() => { if (currentMvpData !== null && filtersLoaded) { try { updateAllTimers(currentMvpData); } catch (e) { console.error("Error updating timers:", e); } } }, 1000);
        const LATE_WINDOW_MS = 600000; const mvpContainer = document.getElementById("mvp-list-container");
        function updateAllTimers(data) { /* ... same combined search/filter logic as desktop ... */
            const now = new Date().getTime(); let newStates = {};
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            let mvpsToSort = mvpList.map(mvpData => { /* ... */ const mvpName = mvpData.id; const mvpInfo = data ? data[mvpName] : null; let sortValue = Infinity; if (mvpInfo && mvpInfo.respawnAt) { sortValue = mvpInfo.respawnAt; } return { id: mvpName, name: mvpData.name, seconds: mvpData.seconds, sortValue: sortValue, element: document.getElementById('card-' + mvpName), timerElement: document.getElementById('timer-' + mvpName), deathTimeElement: document.getElementById('death-time-' + mvpName) }; });
            // --- REMOVED Automatic Sort ---
            // mvpsToSort.sort((a, b) => a.sortValue - b.sortValue);
            mvpsToSort.forEach(mvp => { if (!mvp || !mvp.element) { return; } const mvpNameLower = mvp.name.toLowerCase(); const matchesSearch = searchTerm === '' || mvpNameLower.includes(searchTerm); const checkbox = document.getElementById('filter-' + mvp.id); const isChecked = checkbox ? checkbox.checked : true; mvp.element.style.display = (matchesSearch && isChecked) ? 'flex' : 'none'; const isTimerBoss = mvp.seconds > 0; let currentState = 'na'; if (isTimerBoss) { if (!mvp.timerElement || !mvp.deathTimeElement) { /* --- REMOVED appendChild here --- */ return; } const mvpInfo = data ? data[mvp.id] : null; if (mvpInfo && mvpInfo.respawnAt) { const respawnTime = mvpInfo.respawnAt; const timeLeftMs = respawnTime - now; if (timeLeftMs > 0) { mvp.timerElement.textContent = formatTime(timeLeftMs); mvp.timerElement.className = 'timer timer-normal'; currentState = 'normal'; } else if (timeLeftMs > -LATE_WINDOW_MS) { const windowTimeLeftMs = LATE_WINDOW_MS + timeLeftMs; mvp.timerElement.textContent = formatTime(windowTimeLeftMs); mvp.timerElement.className = 'timer timer-window'; currentState = 'window'; const previousState = mvpStates[mvp.id]; if (previousState === 'normal' && currentState === 'window' && isSoundEnabled && alertSound) { alertSound.currentTime = 0; alertSound.play().catch(e => console.log("Alert play failed:", e)); } } else { const overdueMs = Math.abs(timeLeftMs) - LATE_WINDOW_MS; mvp.timerElement.textContent = formatTime(overdueMs); mvp.timerElement.className = 'timer timer-overdue'; currentState = 'overdue'; } const deathTimeMs = respawnTime - (mvp.seconds * 1000); mvp.deathTimeElement.textContent = formatDeathTime(deathTimeMs); } else { mvp.timerElement.textContent = "N/A"; mvp.timerElement.className = 'timer timer-na'; mvp.deathTimeElement.innerHTML = "&nbsp;"; currentState = 'na'; } } else { if (mvp.timerElement) { const mvpData = mvpList.find(item => item.id === mvp.id); const displayText = (mvpData && mvpData.id_num === 2022) ? "Instance" : "Quest / Summon"; mvp.timerElement.textContent = displayText; mvp.timerElement.className = 'timer timer-na'; } if (mvp.deathTimeElement) { mvp.deathTimeElement.innerHTML = "&nbsp;"; } currentState = 'na'; } newStates[mvp.id] = currentState; /* --- REMOVED appendChild here --- */ });
            mvpStates = newStates;
         }
        // --- Manual Sort Function ---
        function sortMvpsNow() {
            if (currentMvpData === null && !filtersLoaded) return;
            let mvpsToSort = mvpList.map(mvpData => { const mvpName = mvpData.id; const mvpInfo = currentMvpData ? currentMvpData[mvpName] : null; let sortValue = Infinity; if (mvpInfo && mvpInfo.respawnAt) { sortValue = mvpInfo.respawnAt; } return { id: mvpName, sortValue: sortValue, element: document.getElementById('card-' + mvpName) }; });
            mvpsToSort.sort((a, b) => a.sortValue - b.sortValue);
            mvpsToSort.forEach(mvp => { if (mvp.element && mvpContainer.contains(mvp.element)) { mvpContainer.appendChild(mvp.element); } });
            if (typeof applyFilters === 'function') { applyFilters(); } // Re-apply filter visibility
        }
        // --- End Manual Sort Function ---

        function formatTime(ms) { /* ... */ let totalSeconds = Math.floor(ms / 1000); let hours = Math.floor(totalSeconds / 3600); totalSeconds %= 3600; let minutes = Math.floor(totalSeconds / 60); let seconds = totalSeconds % 60; hours = (hours < 10) ? "0" + hours : hours; minutes = (minutes < 10) ? "0" + minutes : minutes; seconds = (seconds < 10) ? "0" + seconds : seconds; return `${hours}:${minutes}:${seconds}`; }
        function formatDeathTime(ms) { /* ... */ const d = new Date(ms); const D = d.getDate().toString().padStart(2, '0'); const M = (d.getMonth() + 1).toString().padStart(2, '0'); const h = d.getHours().toString().padStart(2, '0'); const m = d.getMinutes().toString().padStart(2, '0'); const s = d.getSeconds().toString().padStart(2, '0'); return `‡∏ï‡∏≤‡∏¢: ${D}/${M} ${h}:${m}:${s}`; }
        function formatDateForInput(date) { /* ... */ const Y = date.getFullYear(); const M = (date.getMonth() + 1).toString().padStart(2, '0'); const D = date.getDate().toString().padStart(2, '0'); const h = date.getHours().toString().padStart(2, '0'); const m = date.getMinutes().toString().padStart(2, '0'); return `${Y}-${M}-${D}T${h}:${m}`; }
        const editModal = document.getElementById("editModal"); const editCloseBtn = document.getElementById("edit-close-btn"); const editInput = document.getElementById("edit-datetime"); const saveEditBtn = document.getElementById("save-edit-btn"); let currentEditData = null;
        function openEditModal(mvpName, respawnSeconds) { /* ... */ currentEditData = { name: mvpName, seconds: respawnSeconds }; editInput.value = formatDateForInput(new Date()); editModal.style.display = "block"; }
        function handleSaveEdit() { /* ... */ if (!currentEditData) return; const newDeathTimeString = editInput.value; if (!newDeathTimeString) { console.warn("No death time selected."); return; } const newDeathTimeInMs = new Date(newDeathTimeString).getTime(); const respawnTimeInMs = newDeathTimeInMs + (currentEditData.seconds * 1000); mvpRef.child(currentEditData.name).set({ respawnAt: respawnTimeInMs }); editModal.style.display = "none"; currentEditData = null; }
        if (saveEditBtn) { saveEditBtn.onclick = handleSaveEdit; } if (editCloseBtn) { editCloseBtn.onclick = function() { editModal.style.display = "none"; } } window.onclick = function(event) { if (event.target == editModal) { editModal.style.display = "none"; } }
        const filterContainer = document.getElementById("filter-container"); const searchInput = document.getElementById('search-input'); const clearSearchBtn = document.getElementById('clear-search-btn');
        // --- Add Sort Button Listener ---
        const sortNowButton = document.getElementById('sort-now-btn');
        if (sortNowButton) {
            sortNowButton.addEventListener('click', sortMvpsNow);
        }
        // --- End Sort Button Listener ---

        let applyFilters; // Declare applyFilters globally

        // --- NEW: Function to initialize filters AFTER settings are loaded ---
        function initializeFiltersAndApply() {
            if (!filterContainer || !searchInput || !clearSearchBtn) return; // Exit if elements not ready

            // Clear previous checkboxes if any
            filterContainer.innerHTML = '';

            const sortedMvpListForFilter = [...mvpList].sort((a, b) => a.name.localeCompare(b.name));

            sortedMvpListForFilter.forEach(mvpData => {
                const displayName = mvpData.name;
                const filterItem = document.createElement('div');
                filterItem.className = 'filter-item';
                const input = document.createElement('input');
                input.type = 'checkbox';
                input.id = 'filter-' + mvpData.id;
                input.value = mvpData.id;
                // --- Set checked state based on loaded settings ---
                input.checked = (loadedFilterSettings && loadedFilterSettings[mvpData.id] !== undefined)
                                ? loadedFilterSettings[mvpData.id] // Use saved value
                                : true; // Default to true
                // --- End checked state logic ---
                const label = document.createElement('label');
                label.htmlFor = 'filter-' + mvpData.id;
                label.textContent = displayName;
                filterItem.appendChild(input);
                filterItem.appendChild(label);
                filterContainer.appendChild(filterItem);
            });

            // --- Define applyFilters ---
            applyFilters = function() {
                 if (!filtersLoaded) return; // Don't apply if not loaded

                 const searchTerm = searchInput.value.toLowerCase();
                 const checkboxes = filterContainer.querySelectorAll('input[type="checkbox"]');
                 const checkedMvps = new Set();
                 const currentFilterState = {}; // Object to save

                 checkboxes.forEach(cb => {
                     const isChecked = cb.checked;
                     if (isChecked) { // Only check visible ones
                        checkedMvps.add(cb.value);
                     }
                     currentFilterState[cb.value] = isChecked;
                 });

                 // --- Save state to Firebase ---
                 filterSettingsRef.set(currentFilterState);
                 // --- End save logic ---

                 mvpList.forEach(mvpData => {
                     const card = document.getElementById('card-' + mvpData.id);
                     if (card) {
                         const mvpNameLower = mvpData.name.toLowerCase();
                         const matchesSearch = searchTerm === '' || mvpNameLower.includes(searchTerm);
                         const isCheckedByFilter = checkedMvps.has(mvpData.id); // Use the Set

                         card.style.display = (matchesSearch && isCheckedByFilter) ? 'flex' : 'none';
                     }
                 });

                 clearSearchBtn.style.display = searchTerm ? 'block' : 'none';

                 // --- NO Auto Sort call in v2 ---
            }
            // --- End define applyFilters ---

            filterContainer.addEventListener('change', (event) => {
                if (event.target.type === 'checkbox') { applyFilters(); }
            });
            searchInput.addEventListener('input', applyFilters);
            clearSearchBtn.addEventListener('click', () => { searchInput.value = ''; applyFilters(); });

            const selectAllBtn = document.getElementById('select-all-btn');
            const deselectAllBtn = document.getElementById('deselect-all-btn');
            function setAllCheckboxes(checkedState) {
                const checkboxes = filterContainer.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(checkbox => { checkbox.checked = checkedState; });
                applyFilters(); // Apply and save
            }
            if (selectAllBtn) { selectAllBtn.onclick = function() { setAllCheckboxes(true); } }
            if (deselectAllBtn) { deselectAllBtn.onclick = function() { setAllCheckboxes(false); } }

            // Apply initial filter state
            applyFilters();

        } // End initializeFiltersAndApply

    </script>
</body>
</html>
